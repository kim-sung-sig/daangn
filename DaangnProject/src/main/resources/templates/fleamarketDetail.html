<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>상품상세보기</title>
<!--제이쿼리 추가-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<!-- UIkit CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.17.11/dist/css/uikit.min.css" />
<!-- UIkit JS -->
<script src="https://cdn.jsdelivr.net/npm/uikit@3.17.11/dist/js/uikit.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/uikit@3.17.11/dist/js/uikit-icons.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700;800;900&display=swap">
<!-- 카카오맵 api -->
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=fa04a00338cccad468f169754f5e7cc6&libraries=services"></script>
<!-- axios -->
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<link rel="stylesheet" href="/css/header.css">
<link rel="stylesheet" href="/css/fleamarketDetail.css">
<script src="/js/fleamarketDetail.js"></script>
</head>
<body>
	<div id="wrap">
		<header id="header">
			<div id="header-inner">
				<div id="navi">
					<h1 id="logo">
						<a href="/"> <img
							src="https://i.namu.wiki/i/urKu84c6cV1U3tmZqPiopxkCnQOn96j3gA6Wf730iSTzz41XDOeqypSusjBVPXeHxGe8RJAOjMY11uywzcDqSA.svg"
							alt="logo" />
						</a>
					</h1>
					<nav>
						<ul>
							<li><a href="/fleamarket/">중고거래</a></li>
							<li><a href="/upload">내 물건 팔기</a></li>
							<li><a href="/list">생활꿀팁</a></li>
							<li><a href="/list">중고거래</a></li>
							<li><a href="/list">중고거래</a></li>
						</ul>
					</nav>
				</div>
				<div id="search">
					<form action="" method="get" id="searchForm">
						<input class="uk-input uk-form-width-long chat" type="text" placeholder="동네 물품을 검색해주세요!" aria-label="Large" name="search" id="searchText">
					</form>
					<span>
						<th:block th:if="${session.user != null}">
							<a class="uk-button uk-button-default" href="/member/logout">로그아웃</a>
							<a class="uk-button uk-button-default" href="/member/home">마이페이지</a>
						</th:block> <th:block th:if="${session.user == null}">
							<a class="uk-button uk-button-default" href="/member/login">로그인</a>
						</th:block>
					</span>
				</div>
			</div>
		</header>
		<main>
			<div class="uk-container">
				<div uk-slider>
				    <div class="uk-position-relative uk-visible-toggle uk-light" tabindex="-1">
				        <ul class="uk-slider-items uk-child-width-1-2 uk-child-width-1-3@s uk-child-width-1-1@m">
				        	<th:block th:each="img : ${board.boardFileList}">
				        		<li><img th:src="'/files/' + ${img.saveFileName}" alt="" /></li>
				        	</th:block>
				        </ul>
				        <a class="uk-position-center-left uk-position-small uk-hidden-hover" href uk-slidenav-previous uk-slider-item="previous"></a>
				        <a class="uk-position-center-right uk-position-small uk-hidden-hover" href uk-slidenav-next uk-slider-item="next"></a>
				    </div>
				    <ul class="uk-slider-nav uk-dotnav uk-flex-center uk-margin"></ul>
				    
				    
				    <div class="uk-card uk-card-default uk-width-1-1@m">
					    <div class="uk-card-header">
					        <div class="uk-grid-small uk-flex-middle" uk-grid>
					            <div class="uk-width-auto" style="padding:0;width: 40px;height:40px;display: flex;align-items: center;justify-content: center;border-radius: 50%;background: #333">
					                <img class="uk-border-circle" src="/img/스크린샷(1).png" alt="유저프로필사진">
					            </div>
					            <div class="uk-width-expand" id="board-head-line">
					            	<div>
						                <h4 class="uk-card-title uk-margin-remove-bottom">[[${board.member.nickName}]]</h4>
						                <p>[[${board.loc}]]</p>
					            	</div>
									<div>
										온도?
									</div>
					            </div>
					        </div>
					    </div>
					    
					    <div class="hr"></div>
					    
					    <div class="uk-card-body">
					    	<h3 class="uk-card-title uk-margin-remove-bottom">[[${board.subject}]]</h3>
					        <p class="regDate" th:text="${#dates.format(board.regDate, 'yyyy-MM-dd HH:mm:ss')}"></p>
					        <p class="text-card">[[${board.content}]]</p>
					        <div id="mapBox">
					        	<div id="mapInfo" style="display: none;">
					        		<input type="hidden" id="boardIdx" th:value="${board.idx}">
					        		<input type="hidden" id="latitude" th:value="${board.latitude}"/>
					        		<input type="hidden" id="longitude" th:value="${board.longitude}"/>
					        	</div>
					        	<div id="mapText">
					        		<p>거래 희망 장소<span style="float:right;">[[${board.location}]]</span></p>
					        	</div>
						        <div id="map" style="width:570px;height:200px;"></div>					        
					        </div>
					    </div>
					    <div class="hr"></div>
					    <div class="uk-card-footer">
					    	<p class="like"><span>관심 [[${board.countLike}]]</span>ㆍ<span>채팅 5</span>ㆍ<span>조회수 [[${board.readCount}]]</span></p>
					    </div>
					</div>
				</div>
				[[${board}]]
			</div>
		</main>
		<footer>
			<div id="footer-inner">
				<div id="likeHeart" style="width: 65px;height:65px;">
					<th:block th:if="${session.user != null}">
						<th:block th:if=${likeCheck==1}>
							<a href="" uk-icon="heart" class="active"></a>												
						</th:block>
						<th:block th:if=${likeCheck==0}>
							<a href="" uk-icon="heart" class=""></a>												
						</th:block>
					</th:block>
					<th:block th:if="${session.user == null}">
						<a href="" uk-icon="heart" class=""></a>						
					</th:block>
				</div>
				<div id="footerBox">
					<div style="font-weight: 500">
						[[${#numbers.formatInteger(board.price, 0, 'COMMA')}]]원		
					</div>
					<div>
						<form th:action="@{/searchRoom}" method="post" id="chatBtn">
							<input type="hidden" name="boardIdx" th:value="${board.idx}">						
							<button class="uk-button uk-button-primary">채팅하기</button>				
						</form>
					</div>
				</div>
			</div>
		</footer>
	</div>
</body>
</html>